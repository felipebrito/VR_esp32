<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Player Simulator - ESP32 LED Controller</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header com controles principais -->
        <header class="header">
            <h1>ü•Ω VR Player Simulator</h1>
            <div class="connection-status">
                <span id="connectionStatus" class="status disconnected">Desconectado</span>
                <input type="text" id="esp32IP" placeholder="IP do ESP32" value="192.168.1.100">
                <button id="connectBtn">Conectar</button>
                <button id="disconnectBtn" disabled>Desconectar</button>
            </div>
        </header>

        <!-- Painel de controle principal -->
        <div class="main-panel">
            <!-- Simula√ß√£o de eventos Meta Quest -->
            <div class="quest-simulator">
                <h2>üéÆ Simula√ß√£o Meta Quest</h2>
                
                <!-- Sele√ß√£o de Player -->
                <div class="player-selection">
                    <h3>Selecionar Player:</h3>
                    <div class="player-buttons">
                        <button id="selectPlayer1" class="btn btn-primary active">Player 1</button>
                        <button id="selectPlayer2" class="btn btn-secondary">Player 2</button>
                        <button id="selectBothPlayers" class="btn btn-info">Ambos</button>
                    </div>
                </div>
                
                <!-- Controles de Headset -->
                <div class="headset-controls">
                    <h3>Controles de Headset:</h3>
                    <div class="simulation-controls">
                        <button id="simulateHeadsetOn" class="btn btn-success">Headset ON</button>
                        <button id="simulateHeadsetOff" class="btn btn-danger">Headset OFF</button>
                        <button id="simulateFocus" class="btn btn-info">App Focus</button>
                        <button id="simulateUnfocus" class="btn btn-warning">App Unfocus</button>
                    </div>
                </div>
                
                <!-- Sess√£o S√≠ncrona -->
                <div class="sync-session">
                    <h3>Sess√£o S√≠ncrona:</h3>
                    <div class="sync-controls">
                        <button id="startSyncSession" class="btn btn-success">Iniciar Sess√£o S√≠ncrona</button>
                        <button id="stopSyncSession" class="btn btn-danger" disabled>Parar Sess√£o</button>
                        <button id="pauseSyncSession" class="btn btn-warning" disabled>Pausar Sess√£o</button>
                    </div>
                </div>
                
                <div class="player-status">
                    <h3>Status dos Players</h3>
                    <div class="status-indicators">
                        <!-- Player 1 Status -->
                        <div class="player-status-section">
                            <h4>Player 1:</h4>
                            <div class="status-item">
                                <span class="label">Headset:</span>
                                <span id="headsetStatus1" class="status-value offline">OFFLINE</span>
                            </div>
                            <div class="status-item">
                                <span class="label">App Focus:</span>
                                <span id="focusStatus1" class="status-value unfocused">UNFOCUSED</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Player:</span>
                                <span id="playerStatus1" class="status-value disconnected">DISCONNECTED</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Progresso:</span>
                                <span id="progressStatus1" class="status-value">0%</span>
                            </div>
                        </div>
                        
                        <!-- Player 2 Status -->
                        <div class="player-status-section">
                            <h4>Player 2:</h4>
                            <div class="status-item">
                                <span class="label">Headset:</span>
                                <span id="headsetStatus2" class="status-value offline">OFFLINE</span>
                            </div>
                            <div class="status-item">
                                <span class="label">App Focus:</span>
                                <span id="focusStatus2" class="status-value unfocused">UNFOCUSED</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Player:</span>
                                <span id="playerStatus2" class="status-value disconnected">DISCONNECTED</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Progresso:</span>
                                <span id="progressStatus2" class="status-value">0%</span>
                            </div>
                        </div>
                        
                        <!-- Sess√£o S√≠ncrona Status -->
                        <div class="sync-status-section">
                            <h4>Sess√£o S√≠ncrona:</h4>
                            <div class="status-item">
                                <span class="label">Status:</span>
                                <span id="syncStatus" class="status-value inactive">INATIVA</span>
                            </div>
                            <div class="status-item">
                                <span class="label">Players Ativos:</span>
                                <span id="activePlayers" class="status-value">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Player de v√≠deo 360¬∞ -->
            <div class="video-player">
                <h2>üé• Player de V√≠deo 360¬∞</h2>
                <div class="video-container">
                    <div id="video360" class="video-360">
                        <!-- Player 360¬∞ ser√° inserido aqui via JavaScript -->
                    </div>
                    <div class="video-controls">
                        <button id="playBtn" class="btn btn-primary">‚ñ∂Ô∏è Play</button>
                        <button id="pauseBtn" class="btn btn-secondary" disabled>‚è∏Ô∏è Pause</button>
                        <button id="stopBtn" class="btn btn-danger">‚èπÔ∏è Stop</button>
                        <input type="range" id="progressSlider" min="0" max="100" value="0" class="progress-slider">
                        <span id="timeDisplay">00:00 / 00:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Painel de debug e logs -->
        <div class="debug-panel">
            <h2>üîß Debug & Logs</h2>
            <div class="debug-controls">
                <button id="testOn1" class="btn btn-test">Teste on1</button>
                <button id="testPlay1" class="btn btn-test">Teste play1</button>
                <button id="testLed1" class="btn btn-test">Teste led1:50</button>
                <button id="testOn2" class="btn btn-test">Teste on2</button>
                <button id="testPlay2" class="btn btn-test">Teste play2</button>
                <button id="testLed2" class="btn btn-test">Teste led2:75</button>
                <button id="clearLogs" class="btn btn-clear">Limpar Logs</button>
            </div>
            
            <div class="logs-container">
                <div id="logs" class="logs"></div>
            </div>
        </div>

        <!-- Status dos LEDs ESP32 -->
        <div class="led-status">
            <h2>üí° Status dos LEDs ESP32</h2>
            <div class="led-visualization">
                <div class="player1-leds">
                    <h3>Player 1 (LEDs 1-8)</h3>
                    <div class="led-strip">
                        <div class="led" data-led="1"></div>
                        <div class="led" data-led="2"></div>
                        <div class="led" data-led="3"></div>
                        <div class="led" data-led="4"></div>
                        <div class="led" data-led="5"></div>
                        <div class="led" data-led="6"></div>
                        <div class="led" data-led="7"></div>
                        <div class="led" data-led="8"></div>
                    </div>
                </div>
                <div class="player2-leds">
                    <h3>Player 2 (LEDs 9-16)</h3>
                    <div class="led-strip">
                        <div class="led" data-led="9"></div>
                        <div class="led" data-led="10"></div>
                        <div class="led" data-led="11"></div>
                        <div class="led" data-led="12"></div>
                        <div class="led" data-led="13"></div>
                        <div class="led" data-led="14"></div>
                        <div class="led" data-led="15"></div>
                        <div class="led" data-led="16"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="websocket-client.js"></script>
    <script src="quest-simulator.js"></script>
    <script src="video-player.js"></script>
    <script src="led-visualizer.js"></script>
    <script src="main.js"></script>
</body>
</html>
